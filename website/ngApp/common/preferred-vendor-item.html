<style>
    @media only screen and (min-width: 768px) {
  .vendor-card {
    min-height: 636px;
    max-height: 702px;
  }
  .preferred-vendor-item-card-header{
        min-height: 128px;
    }
    }
  @media only screen and (min-width: 992px) {
      .vendor-card {
      min-height: 530px;
    }
    .preferred-vendor-item-card-header{
        min-height: 96px;
    }
}
  @media only screen and (min-width: 1200px) {
  .vendor-card {
    min-height: 496px;
  }
}
</style>


<div style="position: relative">
   
    <div class="loading-overlay" data-ng-show="$ctrl.isLoading"></div>

    <div class="border rounded d-flex flex-column justify-content-between vendor-card my-2 mg-m" data-ng-if="!$ctrl.isInEditMode"
      >
        <div>
            <div class="preferred-vendor-item-card-header text-white p-3" style="  background-color: #1c597c;
        ">
                <div class="row ">
                    <h4 class="col-lg-7 col-md-12 col-sm-12 text-bold">{{ $ctrl.vendorItem.companyName }}</h4>
                    <div data-ng-if="$ctrl.isSiteManager" class="col-lg-5 col-md-12 col-sm-12 d-flex  justify-content-lg-end justify-content-md-start ">
                        <span class="btn btn-light" data-ng-click="$ctrl.onEditItem()">Edit</span>
                        <span class="btn btn-danger mx-1" data-bs-toggle="modal" data-ng-click="$ctrl.deleteItem()">Delete</span>
                    </div>
                </div>
                <div class="d-flex fs-6">
                    <div class="form-group row  text-light" data-ng-if="$ctrl.vendorItem.companyWeb">
                        <a class="text-light" data-ng-href="{{ $ctrl.vendorItem.companyWeb }}" target="_blank">Visit
                            Website</a>
                    </div>
                    <p class="text-light mx-2 mb-0"
                        data-ng-if="$ctrl.vendorItem.companyPhone && $ctrl.vendorItem.companyWeb">
                        -
                    </p>
                    <div class="form-group row" data-ng-if="$ctrl.vendorItem.companyPhone">
                        <a class="text-light" href="tel:{{ $ctrl.vendorItem.companyPhone }}">
                            {{ $ctrl.vendorItem.companyPhone }}</a>
                    </div>
                </div>
            </div>
            <div class="p-3">
                
                <div class="form-group mb-1" data-ng-if="$ctrl.vendorItem.servicesProvidedFriendly">
                    <label class="fw-bold "> Services: </label>
                    <br />
                    <div class="badge bg-primary bg-opacity-10 fs-6 mt-1 margin-right-10 text-dark rounded-pill"
                        data-ng-repeat="service in $ctrl.vendorItem.servicesTagArray  | limitTo:5">
                        {{ service.text }}
                    </div>
                   
                </div>
                <div class="form-group d-flex mb-1" data-ng-if="$ctrl.vendorItem.contactName">
                    <i class="bi bi-person"></i>
                    <label class="col-4 ms-1"> Name: </label>
                    <div class="col-8">{{$ctrl.vendorItem.contactName}}</div>
                </div>

                <div class="form-group d-flex mb-1" data-ng-if=" $ctrl.vendorItem.fullAddress.oneLiner ">
                    <i class="bi bi-geo-alt"></i>
                    <label class="col-4 ms-1"> Address: </label>
                    <div class="col-8">
                        <a target="_blank"
                            data-ng-href="https://maps.google.com/?q={{ $ctrl.vendorItem.fullAddress.oneLiner }}">{{
                            $ctrl.vendorItem.fullAddress.oneLiner }}</a>
                    </div>
                </div>

                <div class="form-group d-flex mb-1" data-ng-if="$ctrl.vendorItem.contactPhone">
                    <i class="bi bi-telephone"></i>

                    <label class="col-4 ms-1"> Contact Phone: </label>
                    <div class="col-8">
                        <a href="tel:{{ $ctrl.vendorItem.contactPhone }}">{{ $ctrl.vendorItem.contactPhone }}</a>
                    </div>
                </div>

                <div class="form-group d-flex mb-1" data-ng-if="$ctrl.vendorItem.contactEmail">
                    <i class="bi bi-envelope"></i>
                    <label class="col-4 ms-1"> Email: </label>
                    <div class="col-8 text-truncate text-link">
                        <a data-ng-href="mailto:{{$ctrl.vendorItem.contactEmail}}">{{ $ctrl.vendorItem.contactEmail}}</a>
                    </div>
                </div>


              
            </div>
        </div>

        <div class="card-footer row p-2 border-top m-0  justify-content-between ">
            <div class="form-group mt-1 mb-2 border-bottom col-lg-12" data-ng-if="$ctrl.vendorItem.notes">

                <label class="text-bold"> Notes: </label>
               <p class="">{{ $ctrl.vendorItem.notes | limitTo: 120 }}

               </p>
            </div>
        <div class="note-text   col-lg-8 col-md-12 col-sm-12 justify-content-center align-middle">
            <p>Added {{ $ctrl.vendorItem.addedDateUtc | date:'MMMM d, y' }} <span data-ng-show="$ctrl.vendorItem.addedByFullName">by {{ $ctrl.vendorItem.addedByFullName }}</span></p>
        </div>
            <div class="col-lg-4 col-md-12 col-sm-12 d-flex justify-content-end">
                <button class="btn btn-primary" style="background-color: #1c597c;">View Details</button>
            </div>
            </div>
            
           

       

    </div>

    <form data-ng-if="$ctrl.isInEditMode">
        <div class="form-group row">
            <label class="col-4"> Company Name: </label>
            <div class="col-8">
                <input type="text" class="form-control form-control-sm"
                    data-ng-model="$ctrl.editVendorItem.companyName" />
            </div> 
        </div>

        <div class="form-group row">
            <label class="col-4"> Phone: </label>
            <div class="col-8">
                <input type="text" class="form-control form-control-sm mask-phone"
                    data-ng-model="$ctrl.editVendorItem.companyPhone" />
            </div>
        </div>

        <div class="form-group row">
            <label class="col-4"> Website: </label>
            <div class="col-8">
                <input type="text" class="form-control form-control-sm" autocomplete="off" autocorrect="off"
                    autocapitalize="off" spellcheck="false" data-ng-model="$ctrl.editVendorItem.companyWeb" />
            </div>
        </div>

        <div class="form-group">
            <label class="col-4"> Address: </label>
            <div class="col-8">
                <input type="text" class="form-control form-control-sm"
                    data-ng-attr-id="{{'vendor-' + $ctrl.vendorItem.preferredVendorId + '-address-text-box'}}"
                    data-ng-model="$ctrl.editVendorItem.fullAddress.oneLiner" />
            </div>
        </div>

        <div class="form-group row">
            <label class="col-4"> Contact Name: </label>
            <div class="col-8">
                <input type="text" class="form-control form-control-sm"
                    data-ng-model="$ctrl.editVendorItem.contactName" />
            </div>
        </div>

        <div class="form-group row">
            <label class="col-4"> Contact Phone: </label>
            <div class="col-8">
                <input class="mask-phone form-control form-control-sm" type="tel"
                    data-ng-model="$ctrl.editVendorItem.contactPhone" />
            </div>
        </div>

        <div class="form-group row">
            <label class="col-4"> Contact Email: </label>
            <div class="col-8">
                <input type="email" class="form-control form-control-sm"
                    data-ng-model="$ctrl.editVendorItem.contactEmail" />
            </div>
        </div>

        <div class="form-group row">
            <label class="col-4"> Services: </label>
            <div class="col-8">
                <tags-input style="width: 90%" ng-model="$ctrl.editVendorItem.servicesTagArray"
                    data-replace-spaces-with-dashes="false">
                    <auto-complete data-min-length="1"
                        data-source="$ctrl.getServiceAutocomplete($query)"></auto-complete>
                </tags-input>
                <span class="note-text">Press the TAB or ENTER key to add multiple services. You can add
                    anything, you are not required to choose from the suggested
                    services.</span>
                <br />
            </div>
        </div>

        <div class="form-group row">
            <label class="col-4"> Notes: </label>
            <div class="col-8">
                <textarea class="form-control form-control-sm" rows="5"
                    data-ng-model="$ctrl.editVendorItem.notes"></textarea>
            </div>
        </div>

        <div>
            <button type="button" class="btn btn-primary" data-ng-click="$ctrl.onSaveVendor()">
                Save
            </button>
            <button type="button" class="btn btn-primary" data-ng-if="!$ctrl.isAddForm"
                data-ng-click="$ctrl.onCancelEdit()">
                Cancel
            </button>
        </div>
    </form>
</div>